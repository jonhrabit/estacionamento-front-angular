<div class="m-2">
  <div class='row'>
    <div class='col'>
      <h1>Veículos</h1>

    </div>
    <div class='col'>
      <button class="btn btn-primary mb-3" (click)="novoVeiculo()">Novo Veículo</button>

    </div>
  </div>
<div class="mb-3">
  <input type="text" class="form-control" placeholder="Filtrar por placa, modelo, proprietário, cargo ou lotação..." [(ngModel)]="filtro" (input)="aplicarFiltro()">
</div>
<div *ngIf="veiculosFiltrados.length === 0">
  <div class="alert alert-info">Nenhum veículo encontrado.</div>
</div>
<table class="table table-striped" *ngIf="veiculosFiltrados.length > 0">
  <thead>
    <tr>
      <th (click)="ordenarPor('id')" style="cursor:pointer">ID <span *ngIf="colunaOrdenacao==='id'">{{ direcaoOrdenacao==='asc' ? '▲' : '▼' }}</span></th>
      <th (click)="ordenarPor('placa')" style="cursor:pointer">Placa <span *ngIf="colunaOrdenacao==='placa'">{{ direcaoOrdenacao==='asc' ? '▲' : '▼' }}</span></th>
      <th (click)="ordenarPor('modelo')" style="cursor:pointer">Modelo <span *ngIf="colunaOrdenacao==='modelo'">{{ direcaoOrdenacao==='asc' ? '▲' : '▼' }}</span></th>
      <th (click)="ordenarPor('cor')" style="cursor:pointer">Cor <span *ngIf="colunaOrdenacao==='cor'">{{ direcaoOrdenacao==='asc' ? '▲' : '▼' }}</span></th>
      <th (click)="ordenarPor('proprietario')" style="cursor:pointer">Proprietário <span *ngIf="colunaOrdenacao==='proprietario'">{{ direcaoOrdenacao==='asc' ? '▲' : '▼' }}</span></th>
      <th (click)="ordenarPor('cargo')" style="cursor:pointer">Cargo <span *ngIf="colunaOrdenacao==='cargo'">{{ direcaoOrdenacao==='asc' ? '▲' : '▼' }}</span></th>
      <th (click)="ordenarPor('lotacao')" style="cursor:pointer">Lotação <span *ngIf="colunaOrdenacao==='lotacao'">{{ direcaoOrdenacao==='asc' ? '▲' : '▼' }}</span></th>
      <th>Ações</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let veiculo of veiculosPaginados">
      <td>{{ veiculo.id }}</td>
      <td>{{ veiculo.placa }}</td>
      <td>{{ veiculo.modelo }}</td>
      <td>{{ veiculo.cor }}</td>
      <td>{{ veiculo.pessoa.nome }}</td>
      <td>{{ veiculo.pessoa.cargo }}</td><td>{{ veiculo.pessoa.lotacao }}</td>
      <td>
        <button class="btn btn-sm btn-primary me-2" (click)="abrirModalEdicao(veiculo)"><i class="bi bi-pencil"></i></button>
        <button class="btn btn-sm btn-danger" (click)="excluirVeiculo(veiculo)"><i class="bi bi-trash"></i></button>
      </td>
    </tr>
  </tbody>
</table>
<nav *ngIf="veiculosFiltrados.length > itensPorPagina">
  <ul class="pagination">
    <li class="page-item" [class.disabled]="paginaAtual === 1">
      <button class="page-link" (click)="paginaAtual = paginaAtual - 1" [disabled]="paginaAtual === 1">Anterior</button>
    </li>
    <li class="page-item" *ngFor="let pagina of [].constructor(totalPaginas); let i = index" [class.active]="paginaAtual === i + 1">
      <button class="page-link" (click)="paginaAtual = i + 1">{{ i + 1 }}</button>
    </li>
    <li class="page-item" [class.disabled]="paginaAtual === totalPaginas">
      <button class="page-link" (click)="paginaAtual = paginaAtual + 1" [disabled]="paginaAtual === totalPaginas">Próxima</button>
    </li>
  </ul>
</nav>
</div>
